SZN.SlideShow=SZN.ClassMaker.makeClass({NAME:'SZN.SlideShow',VERSION:'1.0',CLASS:'class',IMPLEMENT:[SZN.SigInterface]});SZN.SlideShow.prototype.$constructor=function(owner,name,settings){this.owner=owner;this.options={duration:2,autoplay:false,id:false,className:'image-browser-slideshow',pauseId:false,pauseClassName:'image-browser-slideshow-pause',playId:false,playClassName:'image-browser-slideshow-play'};for(var p in settings){this.options[p]=settings[p];}
this.interval=null;this._timeoutDone=SZN.bind(this,this._timeoutDone);this.dom={};this._addEvents();this._render();this.options.autoplay?this._hidePlay():this._hidePause();};SZN.SlideShow.prototype.$destructor=function(){this.removeListener('close','_stop',this.owner);this.removeListener('transitionDone','_next',this.owner);for(var i in this){this[i]=null;}};SZN.SlideShow.prototype._addEvents=function(){if(this.options.autoplay){this.addListener('transitionDone','_next',this.owner);}
this.addListener('close','_stop',this.owner);};SZN.SlideShow.prototype._render=function(){var c=SZN.cEl('div',this.options.id,this.options.className);var pause=SZN.cEl('a',this.options.pauseId,this.options.pauseClassName);pause.href='#';c.appendChild(pause);var play=SZN.cEl('a',this.options.playId,this.options.playClassName);play.href='#';c.appendChild(play);SZN.Events.addListener(pause,'click',this,'_stopClick');SZN.Events.addListener(play,'click',this,'_playClick');this.dom.pause=pause;this.dom.play=play;this.owner.dom.content.appendChild(c);};SZN.SlideShow.prototype._stopClick=function(e,elm){SZN.Events.cancelDef(e);this.removeListener('transitionDone','_next',this.owner);this._hidePause();this._stop();};SZN.SlideShow.prototype._playClick=function(e,elm){SZN.Events.cancelDef(e);this.addListener('transitionDone','_next',this.owner);this._hidePlay();this._next();};SZN.SlideShow.prototype._stop=function(){clearTimeout(this.interval);};SZN.SlideShow.prototype._next=function(){this.interval=setTimeout(this._timeoutDone,this.options.duration*1000);};SZN.SlideShow.prototype._hidePlay=function(){this.dom.play.style.display='none';this.dom.pause.style.display='';};SZN.SlideShow.prototype._hidePause=function(){this.dom.play.style.display='';this.dom.pause.style.display='none';};SZN.SlideShow.prototype._timeoutDone=function(){clearTimeout(this.interval);this.owner.next();};;